<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Billing System - Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="logo">
                <h1>BillApp</h1>
            </div>
            <nav class="nav-menu">
                <a href="index.html" class="nav-link active">
                    <span class="icon">üìä</span> Dashboard
                </a>
                <a href="products.html" class="nav-link">
                    <span class="icon">üì¶</span> Stock
                </a>
                <a href="billing.html" class="nav-link">
                    <span class="icon">üßæ</span> Create Bill
                </a>
                <a href="history.html" class="nav-link">
                    <span class="icon">üìã</span> History
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-header">
                <h2>Dashboard</h2>
                <div class="header-actions">
                    <button class="btn-secondary" onclick="exportData()">Export Data</button>
                    <button class="btn-secondary" onclick="clearAllData()">Clear All</button>
                </div>
            </header>

            <div class="dashboard-grid">
                <!-- Stats Cards -->
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon total">üí∞</div>
                        <div class="stat-info">
                            <h3>Total Revenue</h3>
                            <p class="stat-value" id="totalRevenue">‚Çπ0.00</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon bills">üìÑ</div>
                        <div class="stat-info">
                            <h3>Total Bills</h3>
                            <p class="stat-value" id="totalBills">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon products">üì¶</div>
                        <div class="stat-info">
                            <h3>Products</h3>
                            <p class="stat-value" id="totalProducts">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stock">üìç</div>
                        <div class="stat-info">
                            <h3>Low Stock</h3>
                            <p class="stat-value" id="lowStock">0</p>
                        </div>
                    </div>
                </div>

                <!-- Recent Bills -->
                <div class="recent-section">
                    <h3 class="section-title">Recent Bills</h3>
                    <div class="bills-list" id="recentBills">
                        <p class="empty-state">No bills yet. Create your first bill!</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
    <script>
        function updateDashboard() {
            const products = JSON.parse(localStorage.getItem('products')) || [];
            const bills = JSON.parse(localStorage.getItem('bills')) || [];

            // Update stats
            document.getElementById('totalProducts').textContent = products.length;
            document.getElementById('totalBills').textContent = bills.length;
            
            const totalRevenue = bills.reduce((sum, bill) => sum + bill.total, 0);
            document.getElementById('totalRevenue').textContent = '‚Çπ' + totalRevenue.toFixed(2);

            const lowStockCount = products.filter(p => p.quantity < 5).length;
            document.getElementById('lowStock').textContent = lowStockCount;

            // Update recent bills
            const recentBillsDiv = document.getElementById('recentBills');
            const recent = bills.slice(-5).reverse();
            
            if (recent.length === 0) {
                recentBillsDiv.innerHTML = '<p class="empty-state">No bills yet. Create your first bill!</p>';
                return;
            }

            recentBillsDiv.innerHTML = recent.map(bill => `
                <div class="bill-item">
                    <div class="bill-header">
                        <span class="bill-number">Bill #${bill.id}</span>
                        <span class="bill-date">${new Date(bill.date).toLocaleDateString()}</span>
                    </div>
                    <div class="bill-amount">‚Çπ${bill.total.toFixed(2)}</div>
                </div>
            `).join('');
        }

        function exportData() {
            const data = {
                products: JSON.parse(localStorage.getItem('products')) || [],
                bills: JSON.parse(localStorage.getItem('bills')) || []
            };
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'billing_backup.json';
            link.click();
        }

        function clearAllData() {
            if (confirm('Are you sure? This will delete all data!')) {
                localStorage.clear();
                updateDashboard();
                alert('All data cleared!');
            }
        }

        updateDashboard();
    </script>
    <footer> Made By Waseem</footer>
</body>
</html>
